<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/>

		<title>PersonsList Extension 004 - Sample Web Application</title>

		<script src="https://sapui5.hana.ondemand.com/resources/sap-ui-core.js"
				id="sap-ui-bootstrap"
				data-sap-ui-libs="sap.ui.commons,sap.ui.table"
				data-sap-ui-theme="sap_bluecrystal">
		</script>

		<!-- add sap.ui.table,sap.ui.ux3 and/or other libraries to 'data-sap-ui-libs' if required -->

		<script>
				sap.ui.localResources("personslist-web");
				var view = sap.ui.view({id:"idpersonslist1", viewName:"personslist-web.personslist", type:sap.ui.core.mvc.ViewType.JS});

				// extend ui5 odata model to workaround the not correctly handled inlinecount parameter of service calls
				sap.ui.model.odata.ODataModel.extend("ExtendedODataModel", {
					_loadData : function(p, P, s, e, c, C) {
						var Q = [];
						for (var i = 0; i < P.length; i++)
							if (P[i].substr(0, 6) != "$skip=" && P[i].substr(0, 13) != "$inlinecount=")
								Q.push(P[i]);
						return sap.ui.model.odata.ODataModel.prototype._loadData.call(this, p, Q, s, e, c, C);
					}
				});
				// retrieve available countries from external odata defined in webapp/destinations/odataservicedest
				var externalODataServiceModel = new ExtendedODataModel("proxy/odataservicedest");
				externalODataServiceModel.setCountSupported(false);
				externalODataServiceModel.setSizeLimit(193);
				//externalODataServiceModel.read("/Countries", null, null, true, null, null);
				sap.ui.getCore().setModel(externalODataServiceModel, "extodatamodel");

				view.placeAt("content");
		</script>

	</head>
	<style type="text/css">
	.margin-8px {
		margin: 8px;
	}
	.padding-3px-5px-3px-0px {
		padding: 3px 5px 3px 0px;
	}
	.padding-0px-5px-5px-0px {
		padding: 0px 5px 5px 0px;
	}
	.padding-5px-0px-10px-2px {
		padding: 5px 0px 10px 2px;
	}
	.padding-top-30px {
		padding: 30px 0px 0px 0px;
	}
	.padding-top-10px {
		padding: 10px 0px 0px 0px;
	}
	.padding-top-2px {
		padding: 2px 0px 0px 0px;
	}
	.margin-left-3px {
		margin: 0px 0px 0px 3px;
	}
	</style>
<body class="sapUiBody" role="application">
		<div class="margin-10px" id="content"></div>
	</body>
</html>
